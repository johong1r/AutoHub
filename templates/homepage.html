{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="{% static 'css/homepage.css' %}">
</head>
<body>
    
    <header>
        <div class="headerr">
            <div class="right">
                <a class="logo" href=""><img src="{% static 'images/AutoHub.jpg' %}" alt=""></a>
                <a class="menu" href=""><img src="{% static 'images/menu.svg' %}" alt=""></a>
                <a href="">Для бизнеса</a>
            </div>
            <div class="left">
                <a href="{% url 'login' %}">Вход</a>
                <a href="{% url 'register' %}">Регистрация</a>
                <a class="btn" href="{% url 'create' %}">Разместить обьявление</a>
            </div>
        </div>
    </header>

        <section class="firstSec">
            <div class="choose">
                <select class="filter-select">
                <option>Все марки</option>
                </select>
            </div>

            <div class="search1">
                <form action="{% url 'home' %}" method="GET">
                    <input type="text" placeholder="Поиск машин" name="search" value="{{ search }}">
                    <button type="submit">
                        <img src="{% static 'images/search (1).svg' %}" alt="Поиск">
                    </button>
                </form>
            </div>
        </section>

        <div class="container">

    <div class="cars_list">
        <div class="filter">
            <form method="get" class="filter-container">
                <div class="filter-section">
                    <label>Модель</label>
                    <select class="filter-select" name="model">
                        <option value="">Все модели</option>
                        {% for car in cars %}
                            <option value="{{ car.model }}" {% if request.GET.model == car.model %}selected{% endif %}>
                                {{ car.model }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-section">
                    <label>Местоположение</label>
                    <select class="filter-select" name="location">
                        <option value="">Все регионы</option>
                        <option value="Ош" {% if request.GET.location == 'Ош' %}selected{% endif %}>Ош</option>
                        <option value="Бишкек" {% if request.GET.location == 'Бишкек' %}selected{% endif %}>Бишкек</option>
                        <option value="Джалал-Абад" {% if request.GET.location == 'Джалал-Абад' %}selected{% endif %}>Джалал-Абад</option>
                    </select>
                </div>

                <div class="filter-section">
                    <label>Страна учета</label>
                    <select class="filter-select" name="country">
                        <option value="">Все страны</option>
                        <option value="Кыргызстан" {% if request.GET.country == 'Кыргызстан' %}selected{% endif %}>Кыргызстан</option>
                        <option value="Япония" {% if request.GET.country == 'Япония' %}selected{% endif %}>Япония</option>
                        <option value="Германия" {% if request.GET.country == 'Германия' %}selected{% endif %}>Германия</option>
                    </select>
                </div>

                <div class="filter-section">
                    <div class="price-currency">
                        <span>Цена</span>
                        <div class="currency-switcher">
                            <button type="button" class="currency">KGS</button>
                            <button type="button" class="currency">USD</button>
                        </div>
                    </div>
                    <div class="range-inputs">
                        <input type="number" name="min_price" placeholder="Цена от" value="{{ request.GET.min_price }}">
                        <input type="number" name="max_price" placeholder="Цена до" value="{{ request.GET.max_price }}">
                    </div>
                </div>

                <div class="filter-section">
                    <label>Год</label>
                    <select class="filter-select" name="year">
                        <option value="">Любой год</option>
                        {% for year in years %}
                            <option value="{{ year }}" {% if request.GET.year == year|stringformat:"s" %}selected{% endif %}>
                                {{ year }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-actions">
                    <button type="submit" class="show-btn">Показать</button>
                    <a href="{% url 'home' %}" class="reset-btn">Сбросить все фильтры</a>
                </div>
            </form>
        </div>

        <div class="car_list1">
        {% for car in cars %}
            <div class="car_card">
                <div class="left">
                    {% if car.picture %}
                        <img src="{{ car.picture.url }}" alt="{{ car.name }}">
                    {% else %}
                        <img src="{% static 'img/no-photo.png' %}" alt="Нет фото">
                    {% endif %}
                </div>
                <div class="title">
                    <div class="centre">
                        <div class="top">
                            <p class="sale">{{ car.sale.name }}</p>
                            <a href="{% url 'detail' car.pk %}"><h3>{{ car.name }}</h3></a>
                            <h4>{{ car.price }} $</h4>
                        </div>
                        <div class="bottom">
                            <p>{{ car.join_date }}</p>
                        </div>
                    </div>

                    <div class="right">
                        <div class="top">
                            <a href=""><img src="{% static 'images/heart (1).svg' %}" alt=""></a>
                            <a href=""><img src="{% static 'images/mail (1).svg' %}" alt=""></a>
                        </div>
                        <div class="bottom">
                            <a href=""><img src="{% static 'images/phone (1).svg' %}" alt=""></a>
                        </div>
                    </div>
                </div>
            </div>
        {% empty %}
            <p>Ничего не найдено</p>
        {% endfor %}
        </div>
    </div>
    </div>


    <footer>
    <div class="footer">
        <div class="footer-left">
            <a class="logo" href=""><img src="{% static 'images/AutoHub.jpg' %}" alt="AutoHub"></a>
            <p>© 2025 AutoHub. Все права защищены.</p>
        </div>
        <div class="footer-center">
            <a href="">О нас</a>
            <a href="">Контакты</a>
            <a href="">Помощь</a>
            <a href="">Для бизнеса</a>
        </div>
        <div class="footer-right">
            <a class="btn" href="{% url 'create' %}">Разместить обьявление</a>
            <a href=""><img src="{% static 'images/facebook.svg' %}" alt="Facebook"></a>
            <a href=""><img src="{% static 'images/instagram.svg' %}" alt="Instagram"></a>
            <a href=""><img src="{% static 'images/twitter.svg' %}" alt="Twitter"></a>
        </div>
    </div>
</footer>


</body>
</html>